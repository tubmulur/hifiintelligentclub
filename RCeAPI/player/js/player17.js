/*
Copyright notice starts here
UNDER LICENSE: https://github.com/tubmulur/hifiintelligentclub/blob/master/LICENSE
Newest source https://github.com/tubmulur/hifiintelligentclub/blob/master/RCeAPI/player/js/player17.js

Copyright (c) 2017 lubimki.ru HQ audio software, RCeFramework

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

Redestribution of source code must retain the above copyright notice:

Created by lubimki.ru HQ audio software 2001-2017 with association with RCeFramework

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/*/\*\
(C) ....-2001 I.S.Zirinskiy with M.Teselkin (sometimes in parallel, i don't knew. This is an, "before me (Andrey A. Chekmarev)", ancient history) ...
(i) 1993-2001 Andrey A. Chekmarev, training and preparing for this job.   
(C) 2001-2006 I.S.Zirinskiy A.C.Chekmarev M.Teselkin. 
(i) 2001-2006 Very romantic times for a new member of an I. Zirinskiy musicians family.
(i) 2001-2006 Andrey A. Chekmarev was a small tracker man, who wants to learn Cubase SX. 
(i) Igor Semenovich Zirinsky aka ZzzuzzZ, was a great musician, leader of many electronic groups (from 199x, etc, great music, electronica, that was really fantastic)
(i) Michael Teselkin aka MTEEFX, great drummer, from 1980's, studio engineer and music statiob SYSOP.
(i) Andrey Aleksandrovich Chekmarev, was a new member of this great family. Igor accept him in without any questions.
(i) Gennagy Stepanov, a man, who hears music of my heat, and at the terribal times of conflict of Andrey A. Chekmarev with Attoney General, from Moscow goverment. 
(i) Andrey A. Chekmarev was wery inpulsive making all, he think is right, so he shows a pennis to Attoney General and was catched up and prisoned.
(i) As the Attoney General was wery powerful, there were no court or investigation, or process, was not a lawyer, i was just prisonet as is
(i) with a book Route to linux, CD disck Linux Slackware 3.5, and binar arifmetics conspect... 
(i) In early 2001, Andrey Aleksandrovich Chekmarev, was cathed up, with a police group with a gun directed to his head... 
(i) Andrey A. Chekmarev: As i remember, i was in troubles with linux installation, computer was disasembled, I was looking at a gun near my eyes,
(i) I feel nothing. After that Andrey was prisoned without any process. Just catched up and droppet to the prison, at wery cold winter, without any street clothes.
(i) Attony General was wery piwerfull. NoOne could make nothing. He was a total law for me. An it means, a got my prison time at all.
(i)  Totally disasembled computer It remained to lie in the corridor, covering the floor with an even layer.
(i) Just befor this crazy russian police forces action, Andrey was nominanted in internation math olimpades 3 times, he had 12's and 14's result in math, all over the world.
(i) Since 1993, father drop Andrey to gw_basic cource, whitch flow parrallel with Borland Pascal (Teacher was greatest man!!!!) and was finished in 1998 with learning Borland C++ at 272 Gymnasium school
(i) At home, Andrey spends all his time in the computer hardware, software, and free internet accees hacking. I (Andrey) bought a cd with redhat 5, slackware, works together with 
(i) Andrey Limanskky (RIP) The author of L-TOSSER, and sysOp of LIMAN BBS, greatest programmer i ever knew,
(i) L-TOSSER is a robot, which function was to process files, take care of them, divide, repack, analyse, an helps them to find destination point.
(i) From New York to Saint Petersburg, tosser was at every point of telephone line. He catches file and after analysing, desiding, to send it personaly, or make a public sending,
(i) We was a points. Every point, works allother the world, an i was using L-TOSSER too (also with american Kitten Mail, and Binkley KSENIA protocol)
(i) To procees mail, files, encode, decode, pac, convert words of UUE encoding into Photography or Music files. Right from incoming mail, without anny attachments, 
(i) Separated on a different number of parts. To send nusic file, we could use only the message footer, and talking for ea fiew week, to send all encoded parts with a flame with peoples.
(i) I was 16 y.o. Live was great. I dont care about math, and just have no reason to spend my time, mor then 35 lesson in the classroom, so sthe best position in math,
(i) before 1998, was 12's. 12's in the World. (Norway, Australia, i remeber their flags.) 
(i) I was wery busy, i was a point of PartyNet(like altcoin at present), and Fido.Net(like bitcoin in present), I was reciving files and echomail from FidoNet and Party.Net. every night, since 1997 year.
(i) I don't care about anything. Faather and mother, i think cares, but my mother was binary math programmer of military flash cards in intelligent weapones.
(i) Father was system architector, the leader in hardware engeneereng, at LenNauchPribor. Where he created own department,of avia automation modules.
(i) So, i was totally free. No parents at home, no problems. oh, i forgot. I has a computer, Linux Slackware 3.5 in 1996 was a great problem for me.
(i) After scool i spend my time at programmers courses. With 3 languages. B C++, B Pascal, GW basic. Every day. since 1994, I shouldn't go home before 18:00,
(i) At 1995 we got a second place at local competition. First place Stas Neyman: game with graph.lib, controlled by keyboard. Whery colorfull.
(i) O, i forgot. We works not in MS DOS. We had a network and nowel Netware. NetWarzzzz. To play NetWarzzz (3d network space game under Nowel, we wrote 
(i) some analog of former electronic testing programm, with texxt animation at the brgining, and 1 voice music intro.
(i) so, our programm was for teaching students english. My partner at this project was Vasiliy Khodin. i don't tolk at scool,
(i) with anybody else, untill 9th grade.
(i) so this was lyric. This part of BIO is the prelude how i find I.S. Zirinskiy, and what was in my mind.
(i) at 99, I was faild at CAT 99 (Ithmo), i don't care. Someone clewer, i don't remember who, my angel i think,
(i) cross my way with Ihmo RunNet, and Asscembler x86 Teacher. This was the first time, i understand........ I love to win!
(i) Stydiing asscembler was easy. PUSH POP, move, loop F00FC7C8, was a compiled code of unending loop whitch hangs a dos mode, with owerheat.
(i) I made my first virus, an make in wery bad mood RunNet users. They hangs every 6 vinutes. Virus was in screensaver. 
(i) I was graduated as Perfect, made my ascembler programm, and got a second place in all accembler stream at 2001. 
(i) 2001. Just before i met I.S.Zirinskiy. I was dull, SECOND PLACE! My programm was great! But the winner programm, was well designed, and had animation when 
(i) before menu shows at screen. That was great. I had animation too, my programm has had an option, to build an ellipce with dynamic radius,
(i) controlled by mouse. Great stuff. But Second place. I was in a bad mood. I made a cource programm  at turbo pascal with begining words ASM
(i) and ending word ASM, so programm works ine, but has had no pascal code inside, I had to trolling pascal teacher,
(i) I thought, that i could make everything with keyboard and tasm compiller. C++ Was dull, Binar algebra was easy, and dull.
(i) I hav been losting my religion. I was very very bad boy. Dhows a pennis to a Attoney General, and prisoned, without any court, just as is.
(i) because of power of Attoney.
(i) When i met Igor, I totally stops gaming, totally stops coding, i have been spending my time composing music, and playing it at Friday Club.
(i) Ihe chif of this club was my neighbor, i have a server, and have had been using it at night, parallel with my mdem trying got  Fido mail.
(i) He was developer of optical targeting systems. So i know how it works. And, a know that 9 segment "capture" is missile a targeting system
(i) attempt to teach targetin intellectually. It works with all former missile weapons without modification. It is wery easy.
(i) Only the innovation, that missile could destroy targets by the given name, such as cat, or tree. You are pressing the picture,
(i) and missile will find a target, and follow it for a deadly contact. It was in 1998-2001 year, an ancient history of electronically
(i) controlled missiles. So i think now rocket coul speak, and ask you, to have kil or to have a fun while flying, chasing cats and dogs,
(i) or something like this.
(i) Then i meet I.S.Zirinsky, i had a caset with tracker music, hates programming, and got 102 place in international cross univercities olimpiada 
(i) I went to the Olympics very drunk. So 102 place.In the listing there was some i remembrer^ Bercley, Some Japan univercities, and I, Andrey A. Chekmarev at 102 place,
(i) Second line ol a4 lists in the middle.
(i) So i dont know does Igor know, that i was a programmist from a programmers family, but not a musician.... 
(I) But he thrust me, and i like it so, our command works together at hthe present, and will works together in the future.
(i) (c) 2006-2018 I.S. Zirinskiy, A. A. Chekmaryov, K.Y. Shapovalova, M. Teselkin. Thats all i know. Just win or nothing. Only win!
(i) Corrector OlgaRa[ru]
------------------------------------------------------------
(i) Thanks for all who are helping. We will remember it!.
(i) RCeFramework::EDRO developement team. Y2018
Copyright notice ends here
\*\/*/
var p;
var flag=1;
var ind=1;
var stid=0;
var g_volume=0.89;
var vid;
var checkPlaying;
var YaShareInstance;
var qual="128";
var status='none';
var stationX=0;
var step=0;
var loadsteps=8;
var title='';
var neonPosition=1;
var staionWindowHeight;

$.ajaxSetup({async:true});
var loadAnimation=function()
	{
	$('.loading-text').animate({'top':"89vh","left":"80%"},15000,'swing',function()
		{
		$('.loading-text').animate({'top':"20vh","left":"0%",'font-size': '26px'},50000);
		$('.loading-text').css('animation-name', 'rotate').css('animation-duration', '15s').css('animation-iteration-count', 'infinite').css('animation-timing-function', 'linear');
		}
	);
	}
function loading(id){
	if(!$('.station#'+id).hasClass('loading')){
		$('.station#'+id).addClass('loading');
	}
	if($('.station#'+id).hasClass('playing')){
		$('.station#'+id).removeClass('playing');
	}
}
function playing(id){
	if($('.station#'+id).hasClass('loading')){
		$('.station#'+id).removeClass('loading');
	}
	if(!$('.station#'+id).hasClass('playing')){
		$('.station#'+id).addClass('playing');
	}
	if(id!=stid){
		if($('.station#'+stid).hasClass('playing')){
			$('.station#'+stid).removeClass('playing');
		}
	}
}
function pause(id){
	if(typeof vid!=='undefined'){
		if(!vid.paused){
			vid.pause();
		}
	}
//	$('.station').removeClass('playing');
	if($('.station#'+id).hasClass('loading')){
		$('.station#'+id).removeClass('loading');
	}
	if($('.station#'+id).hasClass('playing')){
		$('.station#'+id).removeClass('playing');
	}
}
function play(id){
	if($('.station').hasClass('loading')){
		$('.station').removeClass('loading');
		vid.pause();
	}
	if($('.station').hasClass('playing')){
		$('.station').removeClass('playing');
		vid.pause();
	}
	vid = document.getElementById("p"+id);
		vid.load();
		loading(id);
		vid.volume=g_volume;
		vid.oncanplaythrough  = function() {
			vid.play();
			playing(id);
			document.title='HiFi intelligent club:'+$('.station#'+id).closest('player').find('header h1').text();
//			clearTimeout(checkPlaying);
		};
		vid.onplaying() = function(){
			
//			alert('play');
		};
		vid.onpause() = function(){
			vid.play();
			pause(id);
		};
		vid.onwaiting = function() {
			alert("Wait! I need to buffer the next frame");
		};
		vid.onended = function() {
			alert("Ended");
		};
		vid.onabort = function() {
			alert("Video load aborted");
		};
		vid.onerror = function() {
			alert("Error! Something went wrong");
		};
		vid.onstalled = function() {
			alert("Media data is not available");
		};
		vid.onsuspend = function() {
			alert("Loading of the media is suspended");
		};
}

function setVolume(newVal){
	g_volume=newVal;
//	alert(g_volume);
	vid.volume = g_volume;
	writeCookie("radiomaker_volume", g_volume, d1 );
}
function playerStatus(){
//	console.log(vid.readyState);
//	console.log(vid.ended);
	radiocreatorP(stid,true);
	checkPlaying=setTimeout(playerStatus,2000);
}
function playerStatusI(){
	radiocreatorI(stid,true);
	//checkPlaying=setTimeout(playerStatusI,2000);
}
function radiocreatorI(id,error,qual){
	if(typeof vid==='undefined'){
	//	alert('new');
		play(id);
		
	}else if(vid.paused){
//		alert('paused');
//		pause(id,stid);
	//	alert('paused');
		play(id);
	}else if(!$('.station#'+id).hasClass('playing')){
		
	//	alert('delete');
		if(id!=stid){
			//alert('playing');
			pause(id,stid);
		}
		play(id);
	}else{
		pause(id);
//		alert('pause');
	}
	vid.volume = g_volume;
/*	vid.onstalled = function() {
	//	alert('stal');
		playerStatusI();
	};
	vid.onsuspend = function() {
	//	alert('suspend');
	};*/
	stid=id;
}
function replaceMe(obj,src,description,tag, style)
	{
	//alert('x');
	var w=window.innerWidth;
	var h=window.innerHeight;
	if(h>w){w=h;}
	w=w/100*70;
	//console.log('<'+tag+' src="'+src+w+'" title="'+description+'"/>');
	//
	$(obj).replaceWith('<'+tag+' src="'+src+'&w='+w+'" title="'+description+'" style="max-height:70vh;max-width:100vw;" onload="$(this).closest(\'shader\').find(\'loading\').fadeOut(1500);"/>');
	}
function radiocreatorP(id,error,qual,link){
	//console.log('log:'+status);
	if(stid==id){
		if($('.station#'+id).hasClass('playing')){
			$('.station#'+id).removeClass('playing');
			if(status!='stalled'){
				status="pause";
				//console.log('log:'+status);
				vid.pause();
				return false;
			}
		}
	}
	$('.station#'+stid).removeClass('playing');
	var browser = navigator.userAgent.toLowerCase();
	var isAndroid = browser.indexOf("android") > -1;
	
	
	vid.volume = g_volume;
	vid.onstalled = function() {
		status="stalled";
		//console.log('ev:'+status);
	};
	vid.oncanplaythrough = function() {
		status="playing";
		//console.log('ev:'+status)
		clearTimeout(checkPlaying);
		vid.play();
	};
	vid.onpause = function() {
		status="stopped";
		//console.log('ev:'+status);
		if($('.station#'+id).hasClass('playing')){
			status="playing interrupts";
			//console.log('ev:'+status);
			$('.station#'+id).addClass('loading');
			stid=id;
			playerStatus();
		}
		$('.station').removeClass('playing');
/*		if($('.station#'+id).hasClass('loading')){
			status="disabling by user wheel";
			console.log('ev:'+status);
			$('.station').removeClass('loading');
			clearTimeout(checkPlaying);
		}*/
	};
	vid.onsuspend = function() {
		status="suspend";
		//console.log('ev:'+status);
	};
	vid.onerror = function() {
		
		if($('.station#'+id).hasClass('loading')){
			//console.log('ev:'+status);
			stid=id;
			if(status!="error" && status!="pause")
				{
				playerStatus();
				}
		}
		status="error";
		//console.log('ev:'+status);
	}
	if(typeof link==='undefined'){
	}else{
		p=link;
	}
	if(typeof qual==='undefined'){
			var qual="128";
	}
	vid.src = p.replace('128',qual);

	vid.load();
	if(!$('.station#'+id).is('.loading'))
		{
		$('.station#'+id).addClass('loading');
		}
	/*if(isAndroid) {
		if(!$('.station#'+id).is('.playing')){
			$('.station#'+id).addClass('playing');
		}else{
			vid.pause();
			vid='';
			$('.station#'+id).removeClass('playing');
		}
	}else{*/
		vid.onplay = function() {
			status="play";
			//console.log('ev:'+status);
			document.title='HiFi intelligent club:'+$('.station#'+id).closest('player').find('header h1').text();
			//$('player header h1').text();
			$('.station#'+id).removeClass('loading');
			if($('.station#'+id).hasClass('playing'))
				{
				}
			else
				{
				$('.station#'+id).addClass('playing');
				}
			if(typeof error === 'undefined' || !error){
			//alert(id);
				if(!$('.station#'+id).is('.playing')){
					$('.station#'+id).addClass('playing');
				}else{
				//	vid.pause();
				//	$('.station#'+id).removeClass('playing');
				}
			}
		};
	//}
	stid=id;
}
function minimizeHeight(element){
	var obj=element.closest('.while-loading .load-head');
	if(element.is('.slide-down')){
		obj.css('height','10px');
		writeCookie('collapse-footer','collapse');
		element.text('Р Р°Р·РІРµСЂРЅСѓС‚СЊ')
	}else{
		obj.css('height','254px');
		writeCookie('collapse-footer','expand');
		element.text('РЎРІРµСЂРЅСѓС‚СЊ');
	}
	element.toggleClass('slide-down','slide-up');
}
function clearCommentForm(form){
	form.find('textarea').val("");
}
function updateComments(){
	if(location.pathname.indexOf('/station/view/index')==-1){
		var url='/station/comment/show';
	}else{
		var url=location.pathname.replace('/station/view/index','');
	}
	
	if(url.length<10){
		url='/station/comment/show';
	}
}

function updateCommentsCol(data){
	$('.l-comments #comments-list').html(data);
}
function Like(song_id,id){
	$.ajax({ type: "POST",  url: "/station/view/like", data: {"id":id}, 
			success:function( msg ){ 
					//$('#'+id).closest('.station').find('.like').html(msg);
					if($('#Comment_model_id').val($('.station.playing').attr('id'))){
						$('#Comment_model_id').val($('.station.playing').attr('id'));
						$('#Comment_current_track_name').val($('.station.playing #songName0 p').text());
						$('#Comment_current_track').val($('.station.playing div#songId0').text());
						$('#Comment_comment').val('РњРЅРµ РЅСЂР°РІРёС‚СЃСЏ: '+$('.station.playing #songName0 p').text()+' РЅР° СЃС‚Р°РЅС†РёРё: '+$('.station.playing h1').text());
						$('#comment-form-front-left').ajaxSubmit({
		        				target: '.l-comments',
							clearForm:true,
							success: function(){
							}
        					});
					}
			},
			error: function () {
        			alert("error");
    			}
				});
	$.ajax({ type: "POST",  url: "/station/view/likeSong", data: {"id":id,'song_id':song_id}, 
			success:function( msg ){ 
				$('#'+id).closest('.station').find(' .song-like-up p').html(msg);
			},
			error: function () {
        			alert("error");
    			}
		});
}

function unLike(song_id,id){
		$.ajax({ type: "POST",  url: "/station/view/unLike", data: {"id":id}, 
			success:function( msg ){ 
					if($('#Comment_model_id').val($('.sm2_playing').attr('id'))){
					}
			},
			error: function () {
        			alert("error");
    			}
				});
	$.ajax({ type: "POST",  url: "/station/view/unLikeSong", data: {"id":id,'song_id':song_id}, 
			success:function( msg ){ 
				$('#'+id).closest('.station').find('.song-like-down p').html(msg);
			},
			error: function () {
        			alert("error");
    			}
		});
}
function submitComment(obj){
	var form=obj.closest('form');
	$('.head-station-name').val($('.station.playing h1').text());
	$('#Comment_model_id').val($('.station.playing').attr('id'));
	$('#Comment_current_track_name').val($('.station.playing #songName0 p').text());
	$('#Comment_current_track').val($('.station.playing div#songId0').text());
	$.ajax({ type: "POST",  url: '/station/comment/show', data:form.serialize(), 
		beforeSend:function(){
			clearCommentForm(form);
		},
		success:function(data){
			updateCommentsCol(data);
		},
		error: function () {
		alert("error");
		}
	});
}
function show(obj)
	{
	$(obj).parent().fadeIn(1500);
	}
function playerTouch(event)
	{
	var x=event.touches[0].clientX;
	var y=event.touches[0].clientY;
	document.getElementById('head').innerHTML='x'+x+'y'+y;
	}
function neonUp(position)
	{
//	$('header h1 span').removeClass('layer_4');
	$('header h1 span#e'+position).addClass('layer_4');
	}
/*$(document);
$(document);*/
$(document).on('click','.button-128,.button-256',function()
	{
	if($(this).is('.selected'))
		{
		}
	else
		{
		qual=$(this).attr('class').substr(7);
		if(qual==128){var k=256;}else{var k=128;}
		writeCookie("radiomaker_quality", qual, d1 );
		$(this).closest('li').find('.station').removeClass('hidden');
		$(this).closest('li').find('.q-'+k).addClass('hidden');
		$(this).closest('li').find('.selected').removeClass('selected');
		$(this).addClass('selected');
		}
	}
).on('click', "#open-in-new-window", function()
	{
	if(typeof vid==='undefined')
		{
		}
	else
		{
		vid.pause();
		}
	}
).on('click touchstart','.list-up',function(e)
	{
	$('debugWindow').text(stationX);
	if(stationX<447)
		{
		stationX=0;
		}
	else
		{
		stationX=stationX-447;
		}
	$("#RCeHiFiIntelligentClubStationsLsting").animate({scrollTop:stationX},1500);
	
	//e.preventDefault();
	}
).on('click touchstart','.list-down',function(e)
	{
	if((stationX+223)>stationWindowHeight)
		{
		stationX=stationWindowHeight;
		}
	else
		{
		stationX=stationX+223;
		}
	$('debugWindow').text(stationX);
	$("#RCeHiFiIntelligentClubStationsLsting").animate({scrollTop:stationX},1500);
	//e.preventDefault();
	}
).on('input','.main-volume',function()
	{
	g_volume=$(this).val();
	$('.main-volume').val(g_volume);
	writeCookie("radiomaker_volume", g_volume, d1 );
	if(typeof vid!=='undefined')
		{
		vid.volume=g_volume;
		}
	}
).on('click touchstart','a.clipboad',function(e)
	{
	/*alert('0');
	console.log(document.querySelector('a.clipboad input').select());
	//document.clipboardData.setData('text/plain','https://hifiintelligentclub.ru/#'+e.href+'');
	document.execCommand('copy');*/
	e.preventDefault();
	}
);
function get_player_height()
	{
	
	}
function getUserStatus()
	{
	//console.log('get user status');
	$.ajax({type:'POST',dataType:'HTML',url:'https://radiocreator.ru/user/user/state/2',
		success:function(data)
			{
			$('#rce'+2).html(data);
			},
		error:function()
			{
			}
	});
	}
function RCR_updatePage()
	{
	$.ajax({'url':'/designState.php','dataType':'JSON',
		success:function(state)
			{
			console.log(state);
			for(element1 in state.window1)
				{
				console.log(element1);
				}
			for(element2 in state.window2)
				{
				console.log(element2);
				}
			}
		});
	}
function scrollPlayers(e)
	{
	//console.log($(e).offset().top);
	/*alert('x');*/
	}
$(document).ready(function()
	{
	
	console.log($('window').innerHeight());
		
	loadAnimation();
	title=document.title;
	stationWindowHeight=document.getElementById('stationsList').clientHeight;
	//var ourMainWordsScroller=;
	//var coordinatesPlate=document.getElementById('our-main-words-scroller').offset().top;
	
	//$('overlay').fadeIn(1500);
	$('.loading-text').css('position','absolute');
	vid = document.getElementById("radiocreatorP");
	//vid = document.getElementById("radiocreatorP");
	if(getCookie("radiomaker_quality"))
		{
		var qual=getCookie("radiomaker_quality");
		if(qual==128){var k=256;}else{var k=128;}
		$('.button-128,.button-256').removeClass('selected');
		$('.button-'+qual).addClass('selected');
		$('.q-'+k).addClass('hidden');
		$('.q-'+qual).removeClass('hidden');
		}
	if(!getCookie("radiomaker_volume"))
		{
		$('.main-volume').val(g_volume);
		}
	else
		{
		g_volume=getCookie("radiomaker_volume");
		if(g_volume>1)
			{
			g_volume=g_volume/100;
			}
		$('.main-volume').val(g_volume);
		}
	// РЎС‚Р°С‚РёСЃС‚РёРєР° РЅР°Р¶Р°С‚РёСЏ РєРЅРѕРїРєРё РїР»РµР№ РІ /js/inlineplayer.js
	var intTime = new Date().getTime();
	var getTime = function() 
		{
		var intNow = new Date().getTime();
		if (intNow - intTime > 1000)
			{
			//console.log(status);
			
			//var broadcast_id=15;
			/*$.ajax({'url':'/broadcast_message.php?id='+broadcast_id,
				complete:function(data)
					{
					$('.dj_message').text(data.responseText);
					}
				}
			);*/
			RCR_updatePage();
			console.log($('window').scrollTop());
			$.ajax({'url':'https://radiocreator.ru/RCeAPI/player/get_listeners2.php','dataType':'JSON',
				success:function(listeners)
					{
					for(i in listeners)
						{
						//listeners.forEach(function(k,v)
						$('#listeners'+i+' onair').text(listeners[i].listen);
						$('#listeners'+i+' connected').text(listeners[i].listener_connections);
						$('#listeners'+i+' listeners').text(listeners[i].listen_peak);
						$('#'+i+' remain').text('-'+listeners[i].remain+'sec.');
						}
						//);
					}
				}
			);
			if(typeof vid!=='undefined')
				{
				//console.log(vid.networkState);
				}
			
			if(step<=(loadsteps-1))
				{
				//console.log(step);
/*				var coordinatesFrom=document.getElementById('our-main-words-scroller').offset().top;
				console.log('coordinatesFrom:)'+coordinatesFrom);
				var coordinatesTo=document.anchors['step-'+step].offset().top;
				console.log('coordinatesTo:)'+coordinatesTo);
				var positionOffset=(coordinatesTo-coordinatesFrom);
				console.log('coordinatesOffset:)'+coordinatesOffset);
				$("overlay #our-main-words-scroller").animate({scrollTop: positionOffset},1500);
				*/
				$('overlay page.step-'+step).fadeIn(1500);
				document.getElementById('load-progress').value=(step/8*100);
				step=(step+1);
				}
			if(step==loadsteps)
				{
				//console.log(step);
				document.getElementById('load-progress').value=(step/8*100);
				$('overlay').fadeOut(1500);
				}
			if((step>loadsteps)&&(neonPosition<=21+loadsteps))
				{
				neonUp(neonPosition);
				neonPosition=(neonPosition+1);
				//console.log("neonPosition"+neonPosition);
				}
			//console.log("I'M AWAKING UP");
			//console.log("User status");
			/*
			$.ajax({url:'https://radiocreator.ru/user/user/state/2',
				success:function(data)
				{
				//console.log(data);
				},
			error:function()
				{
				}
			});
			*/
			getUserStatus();
			}
		updateComments();
		intTime = intNow;
		//setTimeout(getTime,20000);
		setTimeout(getTime,5000);
		};
	getTime();
	//setInterval(function(){},10000);
	}
);
window.onload=function(){
	/*$('overlay img').delay(4500).fadeOut(1500);
	$('overlay message').delay(1500).fadeOut(1500);
	$('overlay note.step-1,.overlay note.step-2').delay(1500).fadeOut(1500);
	$('overlay note.step-3').delay(1500).fadeIn(1500);
	$('overlay note.step-3').delay(3000).fadeOut(1500);
	$('overlay note.step-4').delay(3000).fadeIn(1500);
	$('overlay note.step-4').delay(3000).fadeOut(1500);
	$('overlay note.step-5').delay(4500).fadeIn(1500);
	$('overlay note.step-5').delay(4500).fadeOut(1500);
	$('overlay').delay(5500).fadeOut(1500);*/
	$('.adv:nth-child(1)').delay(7000).fadeIn(6000);
	$('.adv:nth-child(2)').delay(12500).fadeIn(6000);
//	$('.pagewrap,.overlay').addClass('loaded');
	loadAnimation=null;
}
